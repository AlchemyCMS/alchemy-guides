h2. Creating own page layouts

Every website has pages that serve certain needs. Contactform pages, intro pages, and standard content pages.

In Alchemy pages has a page layout that can have different settings and collections of available elements.

In this guide you will learn how to define a page layout.

endprologue.


h3. Defining page layouts

You can create your own page layouts by editing the file <code>config/alchemy/page_layouts.yml</code>.

INFO: Generate Alchemy's files and folders with <code>rails g alchemy:scaffold</code>

h4. Configuration options

<pre>
name:                      [String] # The name of the layout used for views and inside the database. You can render a layout with the render_page_layout(name) helper.
unique:                    [Bool]   # Pass true and the user can only choose this layout once inside a language tree.
hide:                      [Bool]   # Pass true to hide this layout from the user.
elements:                  [Array]  # A list of element names that can be placed on this layout i.e. [text, picture]. Elements are defined inside the elements.yml file.
autogenerate:              [Array]  # A list of element names that are autogenerated after creating the Page.
searchresults:             [Bool]   # Pass true to enable rendering the searchresults of the fulltext-search.
layoutpage:                [Bool]   # Layoutpages are outside the normal pagetree and can be used to place "global" language independent Elements.
cache:                     [Bool]   # Pass false to disable the caching for this pages.
feed:                      [Bool]   # Pass true to enable a RSS feed of news elements from this page.
redirects_to_external:     [Bool]   # Pass true to disable normal page rendering and redirect to a external page instead.
controller:                [String]   # Controller to use instead of the default PagesController
action:                    [String]   # Controllers action to use instead of the default PagesController#show
</pre>

Every page layout needs at least a name. You dont need to set every option. It depends on what you need for pages with that layout type.

h4. Example

Lets say you want to create a contact page with a headline element, a formular and text element on it.

This page should be unique per language, because you don't want to give your content manager the possibility to create more than one contact forms.

This page may not be cached, because of rails authenticity_token security feature and validation messages.

We also want to autogenerate the headline and the contactform element while the page gets created.

<pre>
# config/alchemy/page_layouts.yml
- name: contact
  cache: false
  unique: true
  elements: [headline, contactform, text]
  autogenerate: [headline, contactform]
</pre>


h3. Generating the page layout files

Every page layout defined in the <code>page_layouts.yml</code> file should have a view partial located in <code>app/views/alchemy/page_layouts/</code>.

There is no need to create these partials manually. Alchemy CMS comes with a rails generator task which creates these partial files for you.

So after defining the page layouts, you can generate all the corresponding partials for them.

<shell>rails g alchemy:page_layouts --skip</shell>

Using the example above, which defines a contact layout, the generator will create a partial named <code>_contact.html.erb</code>.

h3. Customizing the partial

Alchemy does not place an html markup in your generated page layouts partial:

<pre>
<%= render_elements %>
</pre>

Is all you will see. Feel free to customize the html layout so it fits your needs.

INFO: Alchemy comes with tons of view helpers that you can use to render elements.<br>
Please have a look into the "ElementsHelper documentation":http://rdoc.info/github/magiclabs/alchemy_cms/Alchemy/ElementsHelper#render_elements-instance_method

h3. Translation of page layout names

Page layout names are passed through the I18n library. You can translate them in your Alchemy locale files.

h4. Example

<pre>
# config/locales/alchemy.de.yml
de:
  alchemy:
    page_layout_names:
      contact: Kontakt
      search: Suche
</pre>

INFO: All translation keys used by Alchemy are scoped under the <code>alchemy</code> namespace.

&nbsp;
