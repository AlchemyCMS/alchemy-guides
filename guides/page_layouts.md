# Page layouts

Every page in Alchemy has a page layout.

Think of page layouts as types of pages with different settings and markup. They are used to define page abilities like available elements or cells, caching settings, enabling xml feeds, and so on.

Page layouts are defined in the `config/alchemy/page_layouts.yml` file.

When creating a new page the user gets prompted to select a page layout. Depending on its defintion the user has certain elements to manage content with.

## Rendering

Beside the page layout definitions in the `page_layouts.yml` file, they all have a Rails view partial which is yielded on the Rails layout (for example on `app/views/layouts/application.html.erb`).

They are being parsed through a template engine (ERB, haml or slim) so you can write HTML/CSS and execute Ruby code there.

You can find all page layout partials in the `app/views/alchemy/page_layouts` folder.

They are named after the page layout's name you defined in the `page_layouts.yml` file.

If no page layout partial is found, the `_standard.html.erb` file gets rendered.

## Caching

If using the global caching option (defined in `config/alchemy/config.yml`) - which is enabled by default, your page layouts will be cached for fast delivering through Rails action caching.

You can disable caching of certain pages by using the `cache: false` setting.

## Defining page layouts

In order to define page layouts you have to edit the file `config/alchemy/page_layouts.yml`.

::: tip
Generate Alchemy's files and folders with `bin/rails g alchemy:scaffold`
:::

### Configuration options

Every page layout needs at least a name. You don't need to set every option. It depends on what you need for pages with that layout type.

#### Recommended

* **name** `String` *required*

  The name of the layout used for views and inside the database. You can render a layout with the `render_page_layout(name)` helper.

* **elements** `Array`

  A list of element names that can be placed on this layout i.e. `[text, picture]`.

  [Elements](elements.html) are defined inside the `elements.yml` file.

* **autogenerate** `Array`

  A list of element names that are autogenerated after creating a Page of that type.

* **unique** `Boolean` (Default `false`)

  Pass `true` and the user can only choose this layout once inside a language tree.

* **cache** `Boolean` (Default `true`)

  Pass `false` to disable the caching for this kind of pages. **Recommended for contact forms** and such likes.

* **layoutpage** `Boolean` (Default `false`)

  Layout pages (or global pages) are outside the normal page tree and can be used to place "global" Elements like footers and sidebars.

* **taggable** `Boolean`

  Pass true to be able to assign tags within page settings.

#### Optional

* **hide** `Boolean`

  Pass true to hide this layout from the user.

* **searchresults** `Boolean`

  Pass true to use this type of page for rendering the search results of the build in fulltext search.

* **feed** `Boolean`

  Pass true to enable a RSS feed of news elements from this page.

* **redirects_to_external** `Boolean`

  Pass true to disable normal page rendering and redirect to a external page instead.

* **controller** `String`

  Controller to use instead of the default `Alchemy::PagesController`

* **action** `String`

  Controllers action to use instead of the default `Alchemy::PagesController#show`

### Example

Lets say you want to create a contact page with a headline element, a contactform and a text element on it.

This page should be unique, because you don't want to give your content manager the possibility to create more than one contact form.

This page must not be cached, because of validation messages and user specific form content.

We also want to autogenerate the headline and the contactform element after the page gets created.

~~~ yaml
# config/alchemy/page_layouts.yml
- name: contact
  cache: false
  unique: true
  elements: [headline, contactform, text]
  autogenerate: [headline, contactform]
~~~

::: warning NOTE
Please ensure to restart the server after editing `page_layouts.yml`.
:::

## Generating view partials

Every page layout defined in the `page_layouts.yml` file should have a view partial located in `app/views/alchemy/page_layouts/`.

There is no need to create these partials manually. AlchemyCMS comes with a Rails generator task which creates these partials for you.

So after defining the page layouts, you can generate all the corresponding partials for them.

~~~ bash
bin/rails g alchemy:page_layouts --skip
~~~

Using the example above, which defines a contact layout, the generator will create a partial named `_contact.html.erb`.

::: tip
You can pass `--template-engine` or `-e` as option to use one of `haml`, `slim` and `erb`. The default depends on your default template engine in your Rails host app.
:::

## Customizing view partials

Alchemy does not place any HTML markup in your generated page layouts partial.

So:

~~~ erb
<%= render_elements %>
~~~

is all you will see. Feel free to customize the HTML so it fits your needs.

::: tip
Alchemy comes with tons of view helpers that you can use to render elements. Please have a look at the [`Alchemy::ElementsHelper` documentation](https://www.rubydoc.info/github/AlchemyCMS/alchemy_cms/Alchemy/ElementsHelper#render_elements-instance_method)
:::

## Translate page layout names

Page layout names are passed through the `I18n` library.
You can translate them in your Alchemy locale files.

### Example

~~~ yaml
# config/locales/alchemy.de.yml
de:
  alchemy:
    page_layout_names:
      contact: Kontakt
      search: Suche
~~~

::: tip
All translation keys used by Alchemy are scoped under the `alchemy` namespace.
:::
